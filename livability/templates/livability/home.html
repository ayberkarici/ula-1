{% extends "livability/base.html" %}

{% block title %}HOME{% endblock title %}

{% block content %}
<style>
  #preloader {
    position: fixed;
    z-index: 9999;
    background-color: #fff;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 0.5s ease, visibility 0.5s ease;
  }

  #preloader.fade-out {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    display: none;
  }

  .hero-wrapper {
    max-width: 100vw;
    overflow: hidden;
  }

  .hero-bg {
    background: url('https://images.unsplash.com/photo-1523906834658-6e24ef2386f9?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center center / cover no-repeat;
    min-height: 100vh;
  }

  [class*="col-"] {
    animation: fadeInUp 0.6s ease forwards;
    opacity: 0;
  }

  @keyframes fadeInUp {
    0% { opacity: 0; transform: translateY(40px); }
    100% { opacity: 1; transform: translateY(0); }
  }
 </style>

{% if messages %}
  <div class="container mt-3">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  </div>
{% endif %}

<!-- Preloader -->
<div id="preloader">
  <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;">
    <span class="visually-hidden">YÃ¼kleniyor...</span>
  </div>
</div>

<!-- MODERNIZED LANDING PAGE -->
<div class="hero-wrapper">
  <section class="hero-bg d-flex align-items-center justify-content-center text-center text-white" style="min-height: 80vh;">
    <div class="bg-dark bg-opacity-50 p-5 rounded shadow-lg" style="max-width: 650px; width: 95%;">
      <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f3d9.svg" alt="city" style="height: 60px; margin-bottom: 1rem;">
      <h1 class="display-4 fw-bold mb-3">YaÅŸanabilirlik Testine HoÅŸ Geldiniz</h1>
      <p class="lead mb-4">Kendi kriterlerinize gÃ¶re ÅŸehirleri deÄŸerlendirin. BaÅŸlamak iÃ§in hemen kaydolun veya giriÅŸ yapÄ±n.</p>
      {% if not user.is_authenticated %}
        <a href="{% url 'register' %}" class="btn btn-outline-light btn-lg me-3">KayÄ±t Ol</a>
        <a href="{% url 'login' %}" class="btn btn-primary btn-lg">GiriÅŸ Yap</a>
      {% else %}
        <h4 class="mt-3">HoÅŸ geldin, {{ user.username }} ğŸ‘‹</h4>
        <a href="{% url 'logout' %}" class="btn btn-danger btn-sm mt-2 mb-3">Ã‡Ä±kÄ±ÅŸ Yap</a><br>
        <a href="{% url 'livability:fahp_pairs' %}" class="btn btn-success btn-lg mt-2">Teste BaÅŸla</a>
      {% endif %}
    </div>
  </section>

  <!-- Info Sections Modernized -->
  <section class="py-5 bg-white">
    <div class="container">
      <div class="row g-5 align-items-center">
        <div class="col-md-4 text-center">
          <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f52c.svg" alt="Bilimsel" style="height: 70px; margin-bottom: 1rem;">
          <h5 class="fw-bold">Bilimsel YaklaÅŸÄ±m</h5>
          <p class="text-muted">F-AHP ve TOPSIS gibi Ã§ok kriterli analiz yÃ¶ntemleriyle karar verme sÃ¼reÃ§lerinde bilimsel yaklaÅŸÄ±m.</p>
        </div>
        <div class="col-md-4 text-center">
          <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f4bb.svg" alt="KiÅŸiselleÅŸtirme" style="height: 70px; margin-bottom: 1rem;">
          <h5 class="fw-bold">KiÅŸiselleÅŸtirilmiÅŸ SonuÃ§lar</h5>
          <p class="text-muted">Kendi Ã¶nceliklerinize gÃ¶re ÅŸehirleri sÄ±ralayÄ±n, kontrol tamamen sizde.</p>
        </div>
        <div class="col-md-4 text-center">
          <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f4c8.svg" alt="Veri" style="height: 70px; margin-bottom: 1rem;">
          <h5 class="fw-bold">Veriye DayalÄ±</h5>
          <p class="text-muted">Åehir verileri kamu kaynaklarÄ±ndan alÄ±nÄ±r ve gÃ¼ncel tutulur.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Infographic Section: Åehir BazlÄ± Kategori Ã–ncelikleri -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row mb-4">
        <div class="col text-center">
          <h3 class="fw-bold mb-2">Åehirlerin Kategori Ã–ncelikleri</h3>
          <p class="text-muted">KullanÄ±cÄ±larÄ±n ÅŸehirlerine gÃ¶re en Ã§ok Ã¶nem verdiÄŸi kriterler</p>
        </div>
      </div>
      <div class="row g-4 justify-content-center">
        {% if city_category_top %}
          {% for entry in city_category_top %}
            <div class="col-12 col-md-4 col-lg-3">
              <div class="card border-0 shadow-sm h-100 text-center p-3">
                <div class="mb-2">
                  <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f3d9.svg" alt="city" style="height: 36px;">
                  <span class="fw-bold ms-2">{{ entry.city }}</span>
                </div>
                {% if entry.no_data %}
                  <div class="text-muted mt-3">HenÃ¼z yeterli veri yok.</div>
                {% else %}
                  <div class="d-flex flex-column align-items-center">
                    {% for cat, value in entry.categories %}
                      <div class="mb-2">
                        <span class="fw-bold">{{ cat }}</span>
                        <div class="text-muted small">Ã–ncelik Skoru: {{ value|floatformat:2 }}</div>
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="col text-center text-muted">HenÃ¼z yeterli veri yok.</div>
        {% endif %}
      </div>
      <div class="row mt-4">
        <div class="col text-center">
          <a href="{% url 'livability:city_category_detail' %}" class="btn btn-outline-primary btn-lg">TÃ¼m Åehirleri GÃ¶r</a>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section Modernized -->
  <section class="py-5 bg-white">
    <div class="container">
      <h3 class="text-center mb-4">SÄ±kÃ§a Sorulan Sorular</h3>
      <div class="accordion accordion-flush" id="faqAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="q1">
            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#a1">
              Bu testin amacÄ± nedir ve bana nasÄ±l yardÄ±mcÄ± olur?
            </button>
          </h2>
          <div id="a1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
            <div class="accordion-body">
              YaÅŸanabilirlik Testi, bireylerin kendi yaÅŸam Ã¶nceliklerine gÃ¶re ÅŸehirleri deÄŸerlendirebilmesini saÄŸlar.
              EÄŸitim, saÄŸlÄ±k, gÃ¼venlik, Ã§evre gibi farklÄ± kriterleri kendi Ã¶neminize gÃ¶re aÄŸÄ±rlÄ±klandÄ±rarak sizin iÃ§in en uygun ÅŸehirleri sÄ±ralar.
              Bilimsel karar verme teknikleri kullanÄ±larak sonuÃ§lar oluÅŸturulur.
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="q2">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a2">
              Hangi veri kaynaklarÄ± kullanÄ±lÄ±yor ve veriler ne kadar gÃ¼ncel?
            </button>
          </h2>
          <div id="a2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
            <div class="accordion-body">
              Veriler TÃ¼rkiye Ä°statistik Kurumu (TÃœÄ°K), Ã‡evre ve Åehircilik BakanlÄ±ÄŸÄ±, SaÄŸlÄ±k BakanlÄ±ÄŸÄ± gibi kamu kaynaklarÄ±ndan alÄ±nmaktadÄ±r.
              Sistem, bu kaynaklardaki en gÃ¼ncel verilerle Ã§alÄ±ÅŸÄ±r ve zaman iÃ§inde gÃ¼ncellemelerle iyileÅŸtirilir.
              Bu sayede analizler doÄŸruluÄŸunu ve geÃ§erliliÄŸini korur.
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="q3">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#a3">
              Testi kaÃ§ kez Ã§Ã¶zebilirim ve Ã¶nceki cevaplarÄ±m ne olur?
            </button>
          </h2>
          <div id="a3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
            <div class="accordion-body">
              Sistemde giriÅŸ yaptÄ±ktan sonra testi istediÄŸiniz kadar tekrar Ã§Ã¶zebilirsiniz.
              Her seferinde Ã¶nceki karÅŸÄ±laÅŸtÄ±rmalarÄ±nÄ±z temizlenir ve yeni cevaplarÄ±nÄ±za gÃ¶re ÅŸehirler yeniden sÄ±ralanÄ±r.
              Bu sayede farklÄ± senaryolarÄ± deneyimleyebilir ve karÅŸÄ±laÅŸtÄ±rmalÄ± analiz yapabilirsiniz.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Sample Result Section Modernized -->
  <section class="py-5 bg-light">
    <div class="container text-center">
      <h3 class="mb-4">Ã–rnek SonuÃ§</h3>
      <p class="lead">Senin kriterlerine gÃ¶re en yaÅŸanabilir ÅŸehir: <strong>EskiÅŸehir</strong></p>
      <div class="progress mx-auto" style="max-width: 500px; height: 25px;">
        <div class="progress-bar bg-success" role="progressbar" style="width: 89%">89%</div>
      </div>
    </div>
  </section>
</div>

<script>
  window.addEventListener('load', () => {
    const preloader = document.getElementById("preloader");
    preloader.classList.add("fade-out");
    if (typeof getCookie === "function" && !getCookie("kvkk_accepted")) {
      if (typeof myModal !== "undefined" && myModal.show) {
        myModal.show();
      }
    }
  });
</script>
{% endblock content %}
